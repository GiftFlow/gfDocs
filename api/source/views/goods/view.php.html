<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Wed, 09 Feb 2011 20:22:56 +0000">

<link rel="stylesheet" type="text/css" href="../../../stylesheet.css">
<link rel="start" href="../../../overview-summary.html">

<title>views/goods/view.php (GiftFlow API)</title>

</head>
<body id="file" onload="parent.document.title=document.title;">

<div class="header">
<h1>GiftFlow API</h1>
<ul>
<li><a href="../../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../../overview-files.html">Files</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../../index.html" target="_top">Frames</a>
<a href="../../../source/views/goods/view.php.html" target="_top">No frames</a>
</div>
<hr>

<h1>views/goods/view.php</h1>
<hr>

<a name="line1"></a><pre><?php
<a name="line2"></a>/*
<a name="line3"></a>* The Gift & Need Template 
<a name="line4"></a>*/
<a name="line5"></a>?>
<a name="line6"></a>
<a name="line7"></a><!-- Main Module -->
<a name="line8"></a><div class="gift_module" id="view_gift">
<a name="line9"></a>	<div class="top"></div>
<a name="line10"></a>	<div class="middle">
<a name="line11"></a>		<!-- Main Image-->
<a name="line12"></a>		<img src="<?php echo $G->default_photo->thumb_url;?>" alt="<?php echo $G->title; ?>" />
<a name="line13"></a>		
<a name="line14"></a>		<!-- Title, Description, Tags and More -->
<a name="line15"></a>		<div class='right'>
<a name="line16"></a>		
<a name="line17"></a>			<h1>
<a name="line18"></a>				<?php echo $G->title; ?>
<a name="line19"></a>			</h1>
<a name="line20"></a>			
<a name="line21"></a>			<?php if(!empty($G->location->city)&&!empty($G->location->state)) { ?>
<a name="line22"></a>			<!-- Location -->
<a name="line23"></a>			<p id='location'>
<a name="line24"></a>				<span class='key'>Located in</span>
<a name="line25"></a>				<span class='value'>
<a name="line26"></a>					<?php echo $G->location->city.", ".$G->location->state; ?>
<a name="line27"></a>				</span>
<a name="line28"></a>			</p>
<a name="line29"></a>			<?php } ?>
<a name="line30"></a>			
<a name="line31"></a>			<!-- Date Posted -->
<a name="line32"></a>			<p id='date'>
<a name="line33"></a>				<span class='key'>Posted on</span>
<a name="line34"></a>				<span class='value'>
<a name="line35"></a>					<?php echo date("F jS Y", strtotime($G->created)); ?>
<a name="line36"></a>				</span>
<a name="line37"></a>			</p>
<a name="line38"></a>			
<a name="line39"></a>			<?php if(!empty($G->description)) { ?>
<a name="line40"></a>			<!-- Description -->
<a name="line41"></a>			<p id='description'>
<a name="line42"></a>				<span class='key'>Description</span>
<a name="line43"></a>				<span class='value'>
<a name="line44"></a>					<?php echo $G->description; ?>
<a name="line45"></a>				</span>
<a name="line46"></a>			</p>
<a name="line47"></a>			<?php } ?>
<a name="line48"></a>			
<a name="line49"></a>			<?php if(!empty($G->tags[0]) && count($G->tags)>0) { ?>
<a name="line50"></a>			<!-- Tags -->
<a name="line51"></a>			<p id='tags'>
<a name="line52"></a>				<span class='key'>Tags</span>
<a name="line53"></a>				<span class='value'>
<a name="line54"></a>					<?php foreach($G->tags as $tag) { ?>
<a name="line55"></a>						<a href="<?php echo site_url('find/'.urlencode($tag)); ?>" class='tag'>
<a name="line56"></a>							<?php echo $tag; ?>
<a name="line57"></a>						</a>
<a name="line58"></a>					<?php } ?>
<a name="line59"></a>				</span>
<a name="line60"></a>			</p>
<a name="line61"></a>			<?php } ?>
<a name="line62"></a>			
<a name="line63"></a>			<!-- Buttons -->
<a name="line64"></a>			<?php if($is_owner) { ?>
<a name="line65"></a>				
<a name="line66"></a>				<!-- Edit Button -->
<a name="line67"></a>				<!-- <a href="#" id='edit_this_gift_info'></a>-->
<a name="line68"></a>			
<a name="line69"></a>			<?php } else if($is_gift) { ?>
<a name="line70"></a>
<a name="line71"></a>				<?php if(!empty($transactions) && count($transactions['pending'])>0){ ?>
<a name="line72"></a>				
<a name="line73"></a>					<!-- Gift Already Requested -->
<a name="line74"></a>					<a id='request_gift_button' class='requested'></a>
<a name="line75"></a>					<a href="<?php echo site_url('gifts/'.$G->id.'/unrequest'); ?>">
<a name="line76"></a>						Cancel
<a name="line77"></a>					</a>
<a name="line78"></a>		
<a name="line79"></a>				<?php } else { ?>
<a name="line80"></a>				
<a name="line81"></a>					<!-- Request Gift Button -->
<a name="line82"></a>					<a href="#" id='request_gift_button' class='open'></a>
<a name="line83"></a>				
<a name="line84"></a>				<?php } ?>
<a name="line85"></a>				
<a name="line86"></a>			<?php } else { ?>
<a name="line87"></a>				
<a name="line88"></a>				<!-- Offer Gift Button -->
<a name="line89"></a>				<a href="#" id='offer_gift_button' class='open'></a>
<a name="line90"></a>				
<a name="line91"></a>			<?php } ?>
<a name="line92"></a>		</div>
<a name="line93"></a>		<div style='clear: both;'></div>
<a name="line94"></a>	</div>
<a name="line95"></a>	
<a name="line96"></a>	<div class='bottom' style='display: none;'></div>
<a name="line97"></a>	
<a name="line98"></a>	<?php if(!$is_owner && $is_gift){ ?>
<a name="line99"></a>		
<a name="line100"></a>		<!-- Request Gift Form -->
<a name="line101"></a>		<div id="request_form" class="ui-widget" style="display: none;">
<a name="line102"></a>			<h2>Request Gift</h2>
<a name="line103"></a>			<form method="post" action="<?php echo current_url().'/request'; ?>">
<a name="line104"></a>				<p>
<a name="line105"></a>					<label>I need this gift because...</label><br />
<a name="line106"></a>					<textarea name='reason'></textarea>
<a name="line107"></a>				</p>
<a name="line108"></a>				<input type="submit" class="blue" value="Request This Gift" />
<a name="line109"></a>			</form>
<a name="line110"></a>		</div>
<a name="line111"></a>	
<a name="line112"></a>	<?php } ?>
<a name="line113"></a>	
<a name="line114"></a>	<div class='alt_bottom'>
<a name="line115"></a>	
<a name="line116"></a>		<?php if($is_owner){ ?>
<a name="line117"></a>		
<a name="line118"></a>			<!-- Edit Gift Buttons -->
<a name="line119"></a>			<a href="<?php echo site_url($G->type."s/".$G->id."/edit");?>" id="toolbar_edit_gift" class="gift_toolbar">
<a name="line120"></a>				<span class='ui-icon ui-icon-pencil left'></span>
<a name="line121"></a>				Edit Info
<a name="line122"></a>			</a>
<a name="line123"></a>			
<a name="line124"></a>			<a href="#" id="toolbar_edit_gift" class="gift_toolbar">
<a name="line125"></a>				<span class='ui-icon ui-icon-image left'></span>
<a name="line126"></a>				Edit Photos
<a name="line127"></a>			</a>
<a name="line128"></a>		
<a name="line129"></a>		<?php } ?>
<a name="line130"></a>	
<a name="line131"></a>	</div>
<a name="line132"></a></div>
<a name="line133"></a>
<a name="line134"></a><!-- Requests Sidebar-->
<a name="line135"></a><?php if($is_owner || $requested){ ?>
<a name="line136"></a>	<div class="sidebar" id="giver">		
<a name="line137"></a>		<div class="top">
<a name="line138"></a>			<h2>
<a name="line139"></a>				<?php echo $G->type=="gift" ? "Requests" : "Offers";?>
<a name="line140"></a>			</h2>
<a name="line141"></a>		</div>
<a name="line142"></a>		<div class="center">
<a name="line143"></a>			
<a name="line144"></a>			<?php if($is_owner || count($transactions['pending'])>0) { ?>
<a name="line145"></a>				<p><?php echo count($transactions['pending']); ?> Pending <?php echo $G->type=="gift" ? "Requests" : "Offers";?></p>
<a name="line146"></a>			<?php } ?>
<a name="line147"></a>			
<a name="line148"></a>			<?php if($is_owner || count($transactions['active'])>0) { ?>
<a name="line149"></a>				<p><?php echo count($transactions['active']); ?> Active <?php echo $G->type=="gift" ? "Requests" : "Offers";?></p>
<a name="line150"></a>			<?php } ?>
<a name="line151"></a>			
<a name="line152"></a>			<?php if($is_owner || count($transactions['completed'])>0) { ?>
<a name="line153"></a>				<p><?php echo count($transactions['completed']); ?> Completed <?php echo $G->type=="gift" ? "Requests" : "Offers";?></p>
<a name="line154"></a>			<?php } ?>
<a name="line155"></a>			
<a name="line156"></a>			<?php if($is_owner || count($transactions['declined'])>0) { ?>
<a name="line157"></a>				<p><?php echo count($transactions['declined']); ?> Declined <?php echo $G->type=="gift" ? "Requests" : "Offers";?></p>
<a name="line158"></a>			<?php } ?>
<a name="line159"></a>			
<a name="line160"></a>			<?php if($is_owner || count($transactions['cancelled'])>0) { ?>
<a name="line161"></a>				<p><?php echo count($transactions['cancelled']); ?> Cancelled <?php echo $G->type=="gift" ? "Requests" : "Offers";?></p>
<a name="line162"></a>			<?php } ?>
<a name="line163"></a>			
<a name="line164"></a>		</div>
<a name="line165"></a>		<div class="bottom"></div>
<a name="line166"></a>	</div>
<a name="line167"></a><?php } ?>
<a name="line168"></a>
<a name="line169"></a>
<a name="line170"></a>
<a name="line171"></a><?php if(!$is_owner){ ?>
<a name="line172"></a>	<!-- More About This Person Sidebar-->
<a name="line173"></a>	<div class="sidebar" id="giver">		
<a name="line174"></a>		<div class="top">
<a name="line175"></a>			<h2>More About This Person</h2>
<a name="line176"></a>		</div>
<a name="line177"></a>		<div class="center">
<a name="line178"></a>		
<a name="line179"></a>			<!-- Image -->
<a name="line180"></a>			<img src="<?php echo site_url('api/member/'.$G->user->id.'/photo/thumb');?>" alt="<?php echo $G->user->screen_name;?>" />
<a name="line181"></a>			
<a name="line182"></a>			<!-- Name -->
<a name="line183"></a>			<a href="<?php echo site_url('people/'.$G->user->id);?>">
<a name="line184"></a>				<?php echo $G->user->screen_name; ?>
<a name="line185"></a>			</a>
<a name="line186"></a>			
<a name="line187"></a>			<!-- Location -->
<a name="line188"></a>			<span class="location">
<a name="line189"></a>				<?php echo $G->location->city.", ".$G->location->state;?>
<a name="line190"></a>			</span>
<a name="line191"></a>			
<a name="line192"></a>			<div style="clear: both;"></div>
<a name="line193"></a>		</div>
<a name="line194"></a>		<div class="bottom"></div>
<a name="line195"></a>	</div>
<a name="line196"></a><?php } ?>
<a name="line197"></a>
<a name="line198"></a><!-- Sharing Sidebar -->
<a name="line199"></a><div class="sidebar">		
<a name="line200"></a>	<div class="top">
<a name="line201"></a>		<h2>Share This</h2>
<a name="line202"></a>	</div>
<a name="line203"></a>	<div class="center">
<a name="line204"></a>	
<a name="line205"></a>		<!-- AddThis Toolbox-->
<a name="line206"></a>		<div class="addthis_toolbox">
<a name="line207"></a>			
<a name="line208"></a>			<!-- Facebook Like Button -->
<a name="line209"></a>			<a class="addthis_button_facebook_like"></a>
<a name="line210"></a>		
<a name="line211"></a>			<!-- Other Sharing Destinations -->
<a name="line212"></a>			<div class="two_column">
<a name="line213"></a>				<div class="top"></div>
<a name="line214"></a>				<div class="clear"></div>
<a name="line215"></a>				<div class="column1">					
<a name="line216"></a>					<a class="addthis_button_facebook">Facebook</a>
<a name="line217"></a>					<a class="addthis_button_email">Email</a>
<a name="line218"></a>					<a class="addthis_button_myspace">MySpace</a>
<a name="line219"></a>				</div>
<a name="line220"></a>				<div class="column2">
<a name="line221"></a>					<a class="addthis_button_twitter">Twitter</a>
<a name="line222"></a>					<a class="addthis_button_digg">Digg</a>
<a name="line223"></a>					<a class="addthis_button_delicious">Delicous</a>
<a name="line224"></a>				</div>
<a name="line225"></a>				<div class="clear"></div>
<a name="line226"></a>				<div class="more">
<a name="line227"></a>					<a class="addthis_button_expanded">More Destinations...</a>
<a name="line228"></a>				</div>
<a name="line229"></a>			</div>
<a name="line230"></a>		</div>
<a name="line231"></a>	</div>
<a name="line232"></a>	<div class="bottom"></div>
<a name="line233"></a></div>
<a name="line234"></a>
<a name="line235"></a>
<a name="line236"></a>
<a name="line237"></a>
<a name="line238"></a><div id='request_gift' class='jqmWindow'>
<a name="line239"></a></div>
<a name="line240"></a>
<a name="line241"></a><script type='text/javascript'>
<a name="line242"></a>var tags = new Array();
<a name="line243"></a>$(function(){
<a name="line244"></a>
<a name="line245"></a>	$("#request_gift_button.open").click(function(){
<a name="line246"></a>		$(this).slideUp();
<a name="line247"></a>		$(".gift_module .middle").addClass("shadow");
<a name="line248"></a>		$(".gift_module .bottom").addClass('shadow').slideDown();
<a name="line249"></a>		$("#request_form").delay(500).slideDown("slow");
<a name="line250"></a>		return false;
<a name="line251"></a>	});
<a name="line252"></a>	
<a name="line253"></a>	$("#request_gift").jqm({ 	
<a name="line254"></a>		ajax: "<?php echo site_url('gifts/'.$G->id.'/request/ajax'); ?>", 
<a name="line255"></a>		trigger: '#request_this_gift',
<a name="line256"></a>		onLoad: function(){
<a name="line257"></a>			$(".buttonset").buttonset();
<a name="line258"></a>			$("#request_gift").jqmAddClose("#cancel_request");
<a name="line259"></a>		}
<a name="line260"></a>	});
<a name="line261"></a>
<a name="line262"></a>	$(".button").button();
<a name="line263"></a>	$(".buttonset").buttonset();
<a name="line264"></a>
<a name="line265"></a>	$(".ignore_request").live('click', function(){ 
<a name="line266"></a>		var div = $(this).parent().parent().parent();
<a name="line267"></a>	
<a name="line268"></a>		$.post("<?php echo site_url('ajax/request'); ?>", 
<a name="line269"></a>			{ type: 'ignore', 'request_id': $(this).attr('rel') }, 
<a name="line270"></a>			function ( data ) {
<a name="line271"></a>				div.hide().delay(500);
<a name="line272"></a>				$.notifyBar( { html: data, cls: 'success', delay: 4000, animationSpeed: 'slow'});
<a name="line273"></a>			}, 'html'
<a name="line274"></a>		);
<a name="line275"></a>		return false;
<a name="line276"></a>	});
<a name="line277"></a>	$("a.accept_request").live("click", function(){
<a name="line278"></a>		var div = $(this).parent();
<a name="line279"></a>		var divdiv = $(this).parent().parent();
<a name="line280"></a>		$.post("<?php echo site_url('ajax/request'); ?>", { type: 'accept', 'request_id': $(this).attr('rel') }, function (data) {
<a name="line281"></a>			div.hide();
<a name="line282"></a>			divdiv.append(data);
<a name="line283"></a>		}, 'html');
<a name="line284"></a>		return false;
<a name="line285"></a>	});
<a name="line286"></a>	$("a#view_requests").live("click", function(){
<a name="line287"></a>		var div = $(this).parent().parent();
<a name="line288"></a>		$.post("<?php echo site_url('gifts/'.$G->id.'/requests'); ?>", { ajax: 'TRUE' }, 
<a name="line289"></a>			function(data){ 
<a name="line290"></a>				div.html(data);
<a name="line291"></a>				$(".button").button();
<a name="line292"></a>			},
<a name="line293"></a>			'html'
<a name="line294"></a>		);
<a name="line295"></a>		return false;
<a name="line296"></a>	});
<a name="line297"></a>	<?php echo notify(); ?>
<a name="line298"></a>});
<a name="line299"></a></script></pre>
<div class="header">
<h1>GiftFlow API</h1>
<ul>
<li><a href="../../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../../overview-files.html">Files</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../../index.html" target="_top">Frames</a>
<a href="../../../source/views/goods/view.php.html" target="_top">No frames</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>
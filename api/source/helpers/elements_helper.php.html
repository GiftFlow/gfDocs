<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Sat, 24 Jul 2010 20:47:45 +0000">

<link rel="stylesheet" type="text/css" href="../../stylesheet.css">
<link rel="start" href="../../overview-summary.html">

<title>helpers/elements_helper.php (GiftFlow API)</title>

</head>
<body id="file" onload="parent.document.title=document.title;">

<div class="header">
<h1>GiftFlow API</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/helpers/elements_helper.php.html" target="_top">No frames</a>
</div>
<hr>

<h1>helpers/elements_helper.php</h1>
<hr>

<a name="line1"></a><pre><?php
<a name="line2"></a>if ( ! defined('BASEPATH')) exit('No direct script access allowed');
<a name="line3"></a>
<a name="line4"></a>if ( ! function_exists('breadcrumbs'))
<a name="line5"></a>{
<a name="line6"></a>    	function breadcrumbs( $crumbs = NULL )
<a name="line7"></a>	{
<a name="line8"></a>		$r = '<ul class="breadcrumbs">';
<a name="line9"></a>		foreach($crumbs as $crumb)
<a name="line10"></a>		{
<a name="line11"></a>			$r .= "<li>";
<a name="line12"></a>			if(!empty($crumb['href']))
<a name="line13"></a>				$r .= "<a href='".$crumb['href']."'>".$crumb['title']."</a>&nbsp;/&nbsp;";
<a name="line14"></a>			else
<a name="line15"></a>				$r .= "<span class='current'>".$crumb['title']."</span>";
<a name="line16"></a>			$r .= "</li>";
<a name="line17"></a>		}	
<a name="line18"></a>		$r .= '</ul>';
<a name="line19"></a>		$r .= '<div style="clear: both;"></div>';
<a name="line20"></a>		return $r;
<a name="line21"></a>	}
<a name="line22"></a>}
<a name="line23"></a>if ( ! function_exists('good_thumb'))
<a name="line24"></a>{
<a name="line25"></a>    	function good_thumb($id = NULL, $img = TRUE, $thumb = TRUE)
<a name="line26"></a>	{
<a name="line27"></a>		Console::logSpeed('start good_thumb()');
<a name="line28"></a>
<a name="line29"></a>		if(empty($id))
<a name="line30"></a>		{
<a name="line31"></a>			$CI =& get_instance();
<a name="line32"></a>			$seg2 = $CI->uri->segment('2');
<a name="line33"></a>			if(is_numeric($seg2)) $id = $seg2;
<a name="line34"></a>			else return false;
<a name="line35"></a>		}
<a name="line36"></a>    		$G = new Good($id);
<a name="line37"></a>    		$G->default_photo->get();
<a name="line38"></a>    		if(count($G->default_photo->all)==0)
<a name="line39"></a>    			$url = base_url()."assets/images/default_".$G->type.".png";
<a name="line40"></a>    		else
<a name="line41"></a>    			$url = $G->default_photo->thumb_url;
<a name="line42"></a>    			
<a name="line43"></a>		Console::logSpeed('end good_thumb()');
<a name="line44"></a>    		
<a name="line45"></a>    		if(!$img)
<a name="line46"></a>    			return $url;
<a name="line47"></a>    		else
<a name="line48"></a>    		{
<a name="line49"></a>    			if($thumb) return "<img src='".$url."' class='thumb' alt='".$G->title."' />";
<a name="line50"></a>    			return "<img src='".$url."' alt='".$G->title."' />";
<a name="line51"></a>    		}
<a name="line52"></a>    }   
<a name="line53"></a>}
<a name="line54"></a>
<a name="line55"></a>if ( ! function_exists('good_header'))
<a name="line56"></a>{
<a name="line57"></a>    	function good_header($subtext = NULL, $id = NULL, $title = TRUE)
<a name="line58"></a>	{
<a name="line59"></a>		if(empty($id))
<a name="line60"></a>		{
<a name="line61"></a>			$CI =& get_instance();
<a name="line62"></a>			$seg2 = $CI->uri->segment('2');
<a name="line63"></a>			if(is_numeric($seg2)) $id = $seg2;
<a name="line64"></a>			else return false;
<a name="line65"></a>		}
<a name="line66"></a>		$G = new Good( $id );
<a name="line67"></a>		$G->location->get();
<a name="line68"></a>		$G->user->get();
<a name="line69"></a>    		
<a name="line70"></a>    		$crumbs = array();
<a name="line71"></a>    		if($G->type=="gift")
<a name="line72"></a>    		{
<a name="line73"></a>    			$crumbs[] = array("title"=>"Gifts", "href"=>site_url("gift"));
<a name="line74"></a>    			$crumbs[] = array ("title"=>$G->title);
<a name="line75"></a>    		}
<a name="line76"></a>    		$r = breadcrumbs($crumbs);
<a name="line77"></a>    		
<a name="line78"></a>		if(empty($subtext))
<a name="line79"></a>		{
<a name="line80"></a>			$subtext = "<p>";
<a name="line81"></a>			if(!empty($G->location->city)&&!empty($G->location->state)) $subtext .= $G->location->city.", ".$G->location->state . ' / ';
<a name="line82"></a>			if($G->user->exists()) $subtext .= "from <a href='".site_url('profile/'.$G->user->id)."'>".$G->user->screen_name."</a></p>";
<a name="line83"></a>		}
<a name="line84"></a>    		$r .= "<div id='good_header'>";
<a name="line85"></a>    		$r .= "<div id='good_image'>".good_thumb()."</div>";
<a name="line86"></a>    		$r .= "<div id='good_header_info'>";
<a name="line87"></a>    		$r .= "<h1>".$G->title."</h1>";
<a name="line88"></a>    		$r .= $subtext;
<a name="line89"></a>    		$r .= "</div>";
<a name="line90"></a>    		$r .= "</div>";
<a name="line91"></a>    		return $r;
<a name="line92"></a>    }   
<a name="line93"></a>}
<a name="line94"></a>if ( ! function_exists('good_title'))
<a name="line95"></a>{
<a name="line96"></a>    	function good_title( $id = NULL )
<a name="line97"></a>	{ 
<a name="line98"></a>		if(empty($id))
<a name="line99"></a>		{
<a name="line100"></a>			$CI =& get_instance();
<a name="line101"></a>			$seg2 = $CI->uri->segment('2');
<a name="line102"></a>			if(is_numeric($seg2)) $id = $seg2;
<a name="line103"></a>			else return false;
<a name="line104"></a>		}
<a name="line105"></a>    		$G = new Good( $id );
<a name="line106"></a>    		$G->location->get();
<a name="line107"></a>    		$G->user->get();
<a name="line108"></a>    		$G->needy->get();
<a name="line109"></a>    		$r = "<h1>".$G->title."</h1>";
<a name="line110"></a>    		$r .= "<table><tr><td><h3>Located in</h3></td><td><h3>Posted on</h3></td></tr>";
<a name="line111"></a>    		$r .= "<tr><td>".$G->location->city.", ".$G->location->state."</td><td>".date("F jS Y", strtotime($G->created))."</td></tr>";
<a name="line112"></a>    		if(!empty($G->description))
<a name="line113"></a>    			$r .= "<tr><td colspan='2'><h3>Description</h3></td></tr><tr><td colspan='2'>".$G->description."</td></tr>";
<a name="line114"></a>    		$r .= "</table>";
<a name="line115"></a>    		return $r;
<a name="line116"></a>	}
<a name="line117"></a>}
<a name="line118"></a>if ( ! function_exists('good_row'))
<a name="line119"></a>{
<a name="line120"></a>    	function good_row( $data )
<a name="line121"></a>	{ 
<a name="line122"></a>		$CI =& get_instance();
<a name="line123"></a>		$title = $data['title'];
<a name="line124"></a>		$content = $data['content'];
<a name="line125"></a>		if(isset($data['options']))
<a name="line126"></a>		{
<a name="line127"></a>			$options = $data['options'];
<a name="line128"></a>		}
<a name="line129"></a>		else
<a name="line130"></a>			$options = NULL;
<a name="line131"></a>		$r = '';
<a name="line132"></a>				
<a name="line133"></a>		
<a name="line134"></a>		if(empty($title)||empty($content)) return false;
<a name="line135"></a>		$r .= "<div class='row";
<a name="line136"></a>		if( !isset($options['auto_title']) || $options['auto_title'] ) $r .= " good_".$title;
<a name="line137"></a>		$r .= " '>";
<a name="line138"></a>		$r .= "<div class='row_title";
<a name="line139"></a>		if( !empty($options['row_title_class'])) $r .= " ".$options['row_title_class'];
<a name="line140"></a>		$r .= "'>";
<a name="line141"></a>		if( !isset($options['auto_title']) || $options['auto_title'] )
<a name="line142"></a>		{		
<a name="line143"></a>			$root = $CI->config->item('base_path');
<a name="line144"></a>			$title_img_path = "assets/images/headings/good_".$title.".png";
<a name="line145"></a>			
<a name="line146"></a>			if(file_exists($root.$title_img_path)) $r .= "<img src='".base_url()."/".$title_img_path."' alt='".ucfirst($title)."' class='good_row_title_img' />";
<a name="line147"></a>			else $r .= "<h3 class='good_row_title_text'>".ucfirst($title)."</h3>";
<a name="line148"></a>			
<a name="line149"></a>			$r .= "</div>";
<a name="line150"></a>		}
<a name="line151"></a>		else
<a name="line152"></a>		{
<a name="line153"></a>			$r .= $title;
<a name="line154"></a>			$r .= "</div>";
<a name="line155"></a>		}
<a name="line156"></a>
<a name="line157"></a>		$r .= "<div class='row_content' ";
<a name="line158"></a>		if( !empty($options['row_content_style'])) $r .= " style='".$options['row_content_style']."' ";
<a name="line159"></a>		$r .= ">";
<a name="line160"></a>		$r .= $content;
<a name="line161"></a>		$r .= "</div><div style='clear: both;'></div></div>";
<a name="line162"></a>
<a name="line163"></a>    		return $r;
<a name="line164"></a>    }   
<a name="line165"></a>}
<a name="line166"></a>
<a name="line167"></a>if ( ! function_exists('good_list'))
<a name="line168"></a>{
<a name="line169"></a>    	function good_list( $data, $options = NULL )
<a name="line170"></a>	{ 
<a name="line171"></a>		$CI =& get_instance();
<a name="line172"></a>		
<a name="line173"></a>		// Return false if there is no data and the type of list isn't set
<a name="line174"></a>		if(empty($data)&&empty($options['type']))
<a name="line175"></a>		{
<a name="line176"></a>			return false;
<a name="line177"></a>		}
<a name="line178"></a>		// Return an empty state message
<a name="line179"></a>		elseif(empty($data))
<a name="line180"></a>		{
<a name="line181"></a>			if($options['type']=="gifts")
<a name="line182"></a>				$r = "<p>This user does not have any gifts to give at the moment.</p>";
<a name="line183"></a>			elseif($options['type']=="needs")
<a name="line184"></a>				$r = "<p>This user does not have any needs at the moment.</p>";
<a name="line185"></a>			elseif($options['type']=="completed_gifts")
<a name="line186"></a>				$r = "<p>This user has not yet given any gifts.</p>";			
<a name="line187"></a>			elseif($options['type']=="completed_requests")
<a name="line188"></a>				$r = "<p>This user has not yet received any gifts.</p>";
<a name="line189"></a>			return $r;
<a name="line190"></a>		}
<a name="line191"></a>		
<a name="line192"></a>		// Normal case: data provided.
<a name="line193"></a>		$r = "<ul class='results_list'>";
<a name="line194"></a>		foreach($data as $key=>$val)
<a name="line195"></a>		{
<a name="line196"></a>			$r .= result_row($val, array('location', 'created'), $val);
<a name="line197"></a>		}
<a name="line198"></a>		$r .= "</ul>";
<a name="line199"></a>		
<a name="line200"></a>		return $r;
<a name="line201"></a>    }   
<a name="line202"></a>}
<a name="line203"></a>
<a name="line204"></a>if ( ! function_exists('notify'))
<a name="line205"></a>{
<a name="line206"></a>    	function notify()
<a name="line207"></a>	{
<a name="line208"></a>		return "
<a name="line209"></a>		if(alert_success)
<a name="line210"></a>		{
<a name="line211"></a>			setTimeout(notify_success, 50);
<a name="line212"></a>		}
<a name="line213"></a>		if(alert_error)
<a name="line214"></a>		{
<a name="line215"></a>			setTimeout(notify_error, 50);
<a name="line216"></a>		}
<a name="line217"></a>		function notify_success()
<a name="line218"></a>		{
<a name="line219"></a>			$.notifyBar({ html: alert_success, cls: 'success', animationSpeed: 'normal', delay: 4000});
<a name="line220"></a>		}
<a name="line221"></a>		function notify_error()
<a name="line222"></a>		{
<a name="line223"></a>			$.notifyBar({ html: alert_error, cls: 'error', animationSpeed: 'normal', delay: 4000});
<a name="line224"></a>		}";
<a name="line225"></a>	}
<a name="line226"></a>}
<a name="line227"></a>
<a name="line228"></a>if ( ! function_exists('heading'))
<a name="line229"></a>{
<a name="line230"></a>	function heading( $name, $params = NULL )
<a name="line231"></a>	{
<a name="line232"></a>		$r = "<img src='".base_url()."assets/images/headings/".$name.".png' alt='".ucwords($name)."' ";
<a name="line233"></a>		if(is_array($params))
<a name="line234"></a>		{
<a name="line235"></a>			foreach($params as $key=>$val)
<a name="line236"></a>			{
<a name="line237"></a>				$r .= $key."='".$val."' ";
<a name="line238"></a>			}
<a name="line239"></a>		}
<a name="line240"></a>		$r .= "/>";
<a name="line241"></a>		return $r;
<a name="line242"></a>	}
<a name="line243"></a>}
<a name="line244"></a>
<a name="line245"></a>if ( ! function_exists('form_errors'))
<a name="line246"></a>{
<a name="line247"></a>	function form_errors()
<a name="line248"></a>	{
<a name="line249"></a>		$CI =& get_instance();
<a name="line250"></a>		$flashdata_error = $CI->session->flashdata('error');
<a name="line251"></a>		if(empty($flashdata_error)) return false;
<a name="line252"></a>		
<a name="line253"></a>		if(is_array($flashdata_error))
<a name="line254"></a>		{
<a name="line255"></a>			$array = $flashdata_error;
<a name="line256"></a>			$flashdata_error = '<ul class="alert_error">';
<a name="line257"></a>			foreach($array as $val) $flashdata_error .= "<li>".$val."</li>";
<a name="line258"></a>			$flashdata_error .= "</ul>";
<a name="line259"></a>			return $flashdata_error;
<a name="line260"></a>		}
<a name="line261"></a>		$r = "<p class='alert_error'>".$flashdata_error."</p>";
<a name="line262"></a>		return $r;
<a name="line263"></a>		
<a name="line264"></a>	}
<a name="line265"></a>}
<a name="line266"></a>
<a name="line267"></a>
<a name="line268"></a>if ( ! function_exists('about_menu'))
<a name="line269"></a>{
<a name="line270"></a>	function about_menu( $active = null )
<a name="line271"></a>	{
<a name="line272"></a>		$r  = 	"<ul id='about_menu'>";
<a name="line273"></a>		$r .= 	"<li style='margin-bottom: 22px;'>".heading('about_menu')."</li>";
<a name="line274"></a>		
<a name="line275"></a>		$r .=	"<li><a ";
<a name="line276"></a>		if($active=='index') $r .= "class='active' ";
<a name="line277"></a>		$r .= 	"href='".site_url('about')."'>Intro</a></li>";
<a name="line278"></a>
<a name="line279"></a>		$r .=	"<li><a ";
<a name="line280"></a>		if($active=='tour') $r .= "class='active' ";
<a name="line281"></a>		$r .= 	"href='".site_url('about/tour')."'>The Tour</a></li>";
<a name="line282"></a>
<a name="line283"></a>		$r .=	"<li><a ";
<a name="line284"></a>		if($active=='story') $r .= "class='active' ";
<a name="line285"></a>		$r .= 	"href='".site_url('about/story')."'>Our Story</a></li>";
<a name="line286"></a>		
<a name="line287"></a>		$r .=	"<li><a ";
<a name="line288"></a>		if($active=='press') $r .= "class='active' ";
<a name="line289"></a>		$r .= 	"href='".site_url('about/press')."'>In the Press</a></li>";
<a name="line290"></a>		
<a name="line291"></a>		$r .= "</ul>";
<a name="line292"></a>		return $r;
<a name="line293"></a>	}
<a name="line294"></a>}
<a name="line295"></a>
<a name="line296"></a>if ( ! function_exists('result_row'))
<a name="line297"></a>{
<a name="line298"></a>	function result_row( $G, $params)
<a name="line299"></a>	{
<a name="line300"></a>		Console::logSpeed('start result_row()');
<a name="line301"></a>		$r = "<li class='result_row'>
<a name="line302"></a>				<a href='".site_url('gift/'.$G->id)."' class='result_image'>";
<a name="line303"></a>		if( !isset( $G->photo->url ) )
<a name="line304"></a>			$r .=  "<img src='" . good_thumb( $G->id, FALSE ) . "' />";
<a name="line305"></a>		else
<a name="line306"></a>			$r .=  "<img src='" . $G->photo->thumb_url . "' />";
<a name="line307"></a>		$r .= "</a>
<a name="line308"></a>				<div class='result_meta'>";
<a name="line309"></a>		if($G->type=="gift")
<a name="line310"></a>			$r .= "<a id='title' href='".site_url('gift/'.$G->id). "'>";
<a name="line311"></a>		elseif($G->type == "need")
<a name="line312"></a>			$r .= "<a id='title' href='".site_url('need/'.$G->id). "'>";
<a name="line313"></a>		$r .= $G->title."</a>";
<a name="line314"></a>		
<a name="line315"></a>		// Begin specific parameter output
<a name="line316"></a>		if( in_array("requests", $params) )
<a name="line317"></a>			$r .= "<span id='requests' class='metadata'><em>requested</em> ". count($G->requests->all). " times</span>";
<a name="line318"></a>		if( in_array("author", $params) )
<a name="line319"></a>		{
<a name="line320"></a>			$r .= "<span id='author' class='metadata'><em>from</em> ";
<a name="line321"></a>			if( !empty($G->user)) $r .= "<a href='".site_url('profile/'.$G->user->id)."'>".$G->user->screen_name."</a>";
<a name="line322"></a>			else $r .= "<a href='".site_url('profile/'.$G->needy->id)."'>".$G->needy->screen_name."</a>";
<a name="line323"></a>			$r .= "</span>";
<a name="line324"></a>		}
<a name="line325"></a>		if( in_array("location", $params) && !empty($G->location->city) && !empty($G->location->state) )
<a name="line326"></a>			$r .= "<span id='location' class='metadata'><em>in</em> ".$G->location->city.", ".$G->location->state."</span>";
<a name="line327"></a>		if( in_array("created", $params) )
<a name="line328"></a>			$r .= "<span id='created' class='metadata'><em>posted</em> ". date("F jS Y", strtotime($G->created))."</span>";
<a name="line329"></a>		$r .= "</div><div style='clear: both;'></div></li>";
<a name="line330"></a>		
<a name="line331"></a>		Console::logSpeed('end result_row()');
<a name="line332"></a>		return $r;
<a name="line333"></a>	}
<a name="line334"></a>}
<a name="line335"></a>
<a name="line336"></a>
<a name="line337"></a>if ( ! function_exists('facebook_sdk'))
<a name="line338"></a>{
<a name="line339"></a>	function facebook_sdk()
<a name="line340"></a>	{
<a name="line341"></a>		$r = '<script src="http://connect.facebook.net/en_US/all.js"></script>';
<a name="line342"></a>		$r .= '<div id="fb-root"></div>';
<a name="line343"></a>		$r .= '<script>';
<a name="line344"></a>		$r .= '  window.fbAsyncInit = function() {';
<a name="line345"></a>		$r .= '    FB.init({appId: "111637438874755", status: true, cookie: true,';
<a name="line346"></a>		$r .= '             xfbml: true});';
<a name="line347"></a>		$r .= '  };';
<a name="line348"></a>		$r .= '  (function() {';
<a name="line349"></a>		$r .= '    var e = document.createElement("script"); e.async = true;';
<a name="line350"></a>		$r .= '    e.src = document.location.protocol +';
<a name="line351"></a>		$r .= '    document.getElementById("fb-root").appendChild(e);';
<a name="line352"></a>		$r .= '  }());';
<a name="line353"></a>		$r .= '</script>';
<a name="line354"></a>		return $r;
<a name="line355"></a>	}
<a name="line356"></a>}
<a name="line357"></a>if ( ! function_exists('facebook_open_graph'))
<a name="line358"></a>{
<a name="line359"></a>	function facebook_open_graph( $options = null )
<a name="line360"></a>	{
<a name="line361"></a>		$CI =& get_instance();
<a name="line362"></a>		$seg1 = $CI->uri->segment('1');
<a name="line363"></a>		$seg2 = $CI->uri->segment('2');
<a name="line364"></a>		if($seg1=="gift"&&!empty($seg2))
<a name="line365"></a>		{
<a name="line366"></a>			$G = new Good( $seg2 );
<a name="line367"></a>			$G->location->get();
<a name="line368"></a>			$G->default_photo->get();
<a name="line369"></a>			if(count($G->default_photo->all)==0)
<a name="line370"></a>    				$tags['og:image'] = base_url()."assets/images/default_".$G->type.".png";
<a name="line371"></a>    			else
<a name="line372"></a>    				$tags['og:image'] = $G->default_photo->thumb_url;
<a name="line373"></a>    			$tags['og:title'] = $G->title;
<a name="line374"></a>    			$tags['og:type'] = "product";
<a name="line375"></a>    			
<a name="line376"></a>    			// Location
<a name="line377"></a>    			if(!empty($G->location->latitude)) $tags["og:latitude"] = $G->location->latitude;
<a name="line378"></a>    			if(!empty($G->location->longitude)) $tags["og:longitude"] = $G->location->longitude;
<a name="line379"></a>    			if(!empty($G->location->street_address)) $tags["og:street-address"] = $G->location->street_address;
<a name="line380"></a>    			if(!empty($G->location->city)) $tags["og:locality"] = $G->location->city;
<a name="line381"></a>			if(!empty($G->location->state)) $tags["og:region"] = $G->location->state;
<a name="line382"></a>			if(!empty($G->location->zip)) $tags['og:postal-code'] = $G->location->zip;
<a name="line383"></a>			$tags['og:country-name'] = "USA";
<a name="line384"></a>		}
<a name="line385"></a>    		
<a name="line386"></a>    		$tags['fb:app_id'] = '111637438874755';
<a name="line387"></a>		$tags['og:url'] = current_url();
<a name="line388"></a>		$tags['og:site_name'] = 'GiftFlow';
<a name="line389"></a>		$r = '';
<a name="line390"></a>		foreach($tags as $property=>$content)
<a name="line391"></a>		{
<a name="line392"></a>			$r .= "<meta property='{$property}' content='{$content}' />\n";
<a name="line393"></a>		}
<a name="line394"></a>		return $r;
<a name="line395"></a>	}
<a name="line396"></a>}
<a name="line397"></a>
<a name="line398"></a>if ( ! function_exists('sidebar'))
<a name="line399"></a>{
<a name="line400"></a>	function sidebar( $options )
<a name="line401"></a>	{
<a name="line402"></a>		/*
<a name="line403"></a>		*	Options
<a name="line404"></a>		*	======
<a name="line405"></a>		*
<a name="line406"></a>		*	class
<a name="line407"></a>		*	content (*)
<a name="line408"></a>		*	id 
<a name="line409"></a>		*	title (*)
<a name="line410"></a>		*/
<a name="line411"></a>		$r = '<div class="sidebar ';
<a name="line412"></a>		if(!empty($options['class'])) $r .= '" '.$options["class"];
<a name="line413"></a>		if(!empty($options['id'])) $r .= '" id="'.$options["id"];
<a name="line414"></a>		$r .= '">';
<a name="line415"></a>		$r .= '	<div class="top">';
<a name="line416"></a>		$r .= '		<h2>'.$options["title"].'</h2>';
<a name="line417"></a>		$r .= '	</div>';
<a name="line418"></a>		$r .= '	<div class="center">'.$options["content"].'</div>';
<a name="line419"></a>		$r .= '	<div class="bottom"></div>';
<a name="line420"></a>		$r .= '</div>';
<a name="line421"></a>		return $r;
<a name="line422"></a>	}
<a name="line423"></a>}
<a name="line424"></a>if ( ! function_exists('sharing_sidebar'))
<a name="line425"></a>{
<a name="line426"></a>	function sharing_sidebar( $options = null )
<a name="line427"></a>	{
<a name="line428"></a>		$content = '
<a name="line429"></a>		<div class="addthis_toolbox">
<a name="line430"></a>		    <a class="addthis_button_facebook_like"></a>
<a name="line431"></a>
<a name="line432"></a>		    	<div class="two_column">
<a name="line433"></a>		    		
<a name="line434"></a>		    		<div class="top"></div>
<a name="line435"></a>		    		<div class="clear"></div>
<a name="line436"></a>				<div class="column1">					
<a name="line437"></a>					<a class="addthis_button_facebook">Facebook</a>
<a name="line438"></a>					<a class="addthis_button_email">Email</a>
<a name="line439"></a>					<a class="addthis_button_myspace">MySpace</a>
<a name="line440"></a>			  	</div>
<a name="line441"></a>			  	<div class="column2">
<a name="line442"></a>			  		<a class="addthis_button_twitter">Twitter</a>
<a name="line443"></a>					<a class="addthis_button_digg">Digg</a>
<a name="line444"></a>					<a class="addthis_button_delicious">Delicous</a>
<a name="line445"></a>			  	</div>
<a name="line446"></a>			  	<div class="clear"></div>
<a name="line447"></a>			  	<div class="more">
<a name="line448"></a>					<a class="addthis_button_expanded">More Destinations...</a>
<a name="line449"></a>				</div>
<a name="line450"></a>			</div>
<a name="line451"></a>		</div>';
<a name="line452"></a>		$options = array ("title"=>"Share This", "content"=>$content);
<a name="line453"></a>		return sidebar( $options );
<a name="line454"></a>	}
<a name="line455"></a>}
<a name="line456"></a>if ( ! function_exists('time_ago'))
<a name="line457"></a>{
<a name="line458"></a>	/*
<a name="line459"></a>	*	Calculates time ago string
<a name="line460"></a>	*	For example, "This post was created 4 minutes ago" instead of displaying
<a name="line461"></a>	*	a date
<a name="line462"></a>	*
<a name="line463"></a>	*	@param timestamp $datefrom
<a name="line464"></a>	*	@param timestamp $dateto
<a name="line465"></a>	*/
<a name="line466"></a>	function time_ago( $datefrom, $dateto=-1 )
<a name="line467"></a>	{
<a name="line468"></a>		// Defaults and assume if 0 is passed in that
<a name="line469"></a>		// its an error rather than the epoch
<a name="line470"></a>		
<a name="line471"></a>		if($datefrom<=0) 
<a name="line472"></a>			return "A long time ago";
<a name="line473"></a>		if($dateto==-1)
<a name="line474"></a>			$dateto = time();
<a name="line475"></a>		
<a name="line476"></a>		// Calculate the difference in seconds betweeen
<a name="line477"></a>		// the two timestamps
<a name="line478"></a>		$difference = $dateto - $datefrom;
<a name="line479"></a>		
<a name="line480"></a>		// If difference is less than 60 seconds,
<a name="line481"></a>		// seconds is a good interval of choice
<a name="line482"></a>		
<a name="line483"></a>		if($difference < 60)
<a name="line484"></a>		{
<a name="line485"></a>			$interval = "s";
<a name="line486"></a>		}
<a name="line487"></a>		
<a name="line488"></a>		// If difference is between 60 seconds and
<a name="line489"></a>		// 60 minutes, minutes is a good interval
<a name="line490"></a>		elseif($difference >= 60 && $difference<60*60)
<a name="line491"></a>		{
<a name="line492"></a>			$interval = "n";
<a name="line493"></a>		}
<a name="line494"></a>		
<a name="line495"></a>		// If difference is between 1 hour and 24 hours
<a name="line496"></a>		// hours is a good interval
<a name="line497"></a>		elseif($difference >= 60*60 && $difference<60*60*24)
<a name="line498"></a>		{
<a name="line499"></a>			$interval = "h";
<a name="line500"></a>		}
<a name="line501"></a>		
<a name="line502"></a>		// If difference is between 1 day and 7 days
<a name="line503"></a>		// days is a good interval
<a name="line504"></a>		elseif($difference >= 60*60*24 && $difference<60*60*24*7)
<a name="line505"></a>		{
<a name="line506"></a>			$interval = "d";
<a name="line507"></a>		}
<a name="line508"></a>		
<a name="line509"></a>		// If difference is between 1 week and 30 days
<a name="line510"></a>		// weeks is a good interval
<a name="line511"></a>		elseif($difference >= 60*60*24*7 && $difference <
<a name="line512"></a>		60*60*24*30)
<a name="line513"></a>		{
<a name="line514"></a>			$interval = "ww";
<a name="line515"></a>		}
<a name="line516"></a>		
<a name="line517"></a>		// If difference is between 30 days and 365 days
<a name="line518"></a>		// months is a good interval, again, the same thing
<a name="line519"></a>		// applies, if the 29th February happens to exist
<a name="line520"></a>		// between your 2 dates, the function will return
<a name="line521"></a>		// the 'incorrect' value for a day
<a name="line522"></a>		elseif($difference >= 60*60*24*30 && $difference <
<a name="line523"></a>		60*60*24*365)
<a name="line524"></a>		{
<a name="line525"></a>			$interval = "m";
<a name="line526"></a>		}
<a name="line527"></a>		
<a name="line528"></a>		// If difference is greater than or equal to 365
<a name="line529"></a>		// days, return year. This will be incorrect if
<a name="line530"></a>		// for example, you call the function on the 28th April
<a name="line531"></a>		// 2008 passing in 29th April 2007. It will return
<a name="line532"></a>		// 1 year ago when in actual fact (yawn!) not quite
<a name="line533"></a>		// a year has gone by
<a name="line534"></a>		elseif($difference >= 60*60*24*365)
<a name="line535"></a>		{
<a name="line536"></a>			$interval = "y";
<a name="line537"></a>		}
<a name="line538"></a>		
<a name="line539"></a>		// Based on the interval, determine the
<a name="line540"></a>		// number of units between the two dates
<a name="line541"></a>		// From this point on, you would be hard
<a name="line542"></a>		// pushed telling the difference between
<a name="line543"></a>		// this function and DateDiff. If the $datediff
<a name="line544"></a>		// returned is 1, be sure to return the singular
<a name="line545"></a>		// of the unit, e.g. 'day' rather 'days'
<a name="line546"></a>		
<a name="line547"></a>		switch($interval)
<a name="line548"></a>		{
<a name="line549"></a>			case "m":
<a name="line550"></a>				$months_difference = floor($difference / 60 / 60 / 24 / 29);
<a name="line551"></a>				while ( 	mktime(date("H", $datefrom), 
<a name="line552"></a>						date("i", $datefrom),
<a name="line553"></a>						date("s", $datefrom), 
<a name="line554"></a>						date("n", $datefrom)+($months_difference),
<a name="line555"></a>						date("j", $dateto), 
<a name="line556"></a>						date("Y", $datefrom)) < $dateto)
<a name="line557"></a>				{
<a name="line558"></a>					$months_difference++;
<a name="line559"></a>				}
<a name="line560"></a>				$datediff = $months_difference;
<a name="line561"></a>		
<a name="line562"></a>				// We need this in here because it is possible
<a name="line563"></a>				// to have an 'm' interval and a months
<a name="line564"></a>				// difference of 12 because we are using 29 days
<a name="line565"></a>				// in a month
<a name="line566"></a>				
<a name="line567"></a>				if($datediff==12)
<a name="line568"></a>					$datediff--;
<a name="line569"></a>				
<a name="line570"></a>				$res = ($datediff==1) ? "$datediff month ago" : "$datediff
<a name="line571"></a>				months ago";
<a name="line572"></a>				break;
<a name="line573"></a>		
<a name="line574"></a>			case "y":
<a name="line575"></a>				$datediff = floor($difference / 60 / 60 / 24 / 365);
<a name="line576"></a>				$res = ($datediff==1) ? "$datediff year ago" : "$datediff
<a name="line577"></a>						years ago";
<a name="line578"></a>				break;
<a name="line579"></a>		
<a name="line580"></a>		case "d":
<a name="line581"></a>		$datediff = floor($difference / 60 / 60 / 24);
<a name="line582"></a>		$res = ($datediff==1) ? "$datediff day ago" : "$datediff
<a name="line583"></a>		days ago";
<a name="line584"></a>		break;
<a name="line585"></a>		
<a name="line586"></a>		case "ww":
<a name="line587"></a>		$datediff = floor($difference / 60 / 60 / 24 / 7);
<a name="line588"></a>		$res = ($datediff==1) ? "$datediff week ago" : "$datediff
<a name="line589"></a>		weeks ago";
<a name="line590"></a>		break;
<a name="line591"></a>		
<a name="line592"></a>		case "h":
<a name="line593"></a>		$datediff = floor($difference / 60 / 60);
<a name="line594"></a>		$res = ($datediff==1) ? "$datediff hour ago" : "$datediff
<a name="line595"></a>		hours ago";
<a name="line596"></a>		break;
<a name="line597"></a>		
<a name="line598"></a>		case "n":
<a name="line599"></a>		$datediff = floor($difference / 60);
<a name="line600"></a>		$res = ($datediff==1) ? "$datediff minute ago" :
<a name="line601"></a>		"$datediff minutes ago";
<a name="line602"></a>		break;
<a name="line603"></a>		
<a name="line604"></a>		case "s":
<a name="line605"></a>		$datediff = $difference;
<a name="line606"></a>		$res = ($datediff==1) ? "$datediff second ago" :
<a name="line607"></a>		"$datediff seconds ago";
<a name="line608"></a>		break;
<a name="line609"></a>		}
<a name="line610"></a>		return $res;
<a name="line611"></a>	}
<a name="line612"></a>}
<a name="line613"></a>?>
<a name="line614"></a></pre>
<div class="header">
<h1>GiftFlow API</h1>
<ul>
<li><a href="../../overview-summary.html">Overview</a></li>
<li>Package</li><li>Class</li><li>Tree</li><li><a href="../../overview-files.html">Files</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../../index.html" target="_top">Frames</a>
<a href="../../source/helpers/elements_helper.php.html" target="_top">No frames</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="generator" content="PHPDoctor 2RC4 (http://peej.github.com/phpdoctor/)">
<meta name="when" content="Sat, 24 Jul 2010 20:47:44 +0000">

<link rel="stylesheet" type="text/css" href="../stylesheet.css">
<link rel="start" href="../overview-summary.html">

<title>Auth_OpenID_Consumer (GiftFlow API)</title>

</head>
<body id="definition" onload="parent.document.title=document.title;">

<div class="header">
<h1>GiftFlow API</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../openid/package-summary.html">Package</a></li>
<li class="active">Class</li>
<li><a href="../openid/package-tree.html">Tree</a></li>
<li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../openid/auth_openid_consumer.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<div class="qualifiedName">OpenID\Auth_OpenID_Consumer</div>
<a href="../source/libraries/auth/openid/consumer.php.html#line215" class="location">libraries/Auth/OpenID/Consumer.php at line 215</a>

<h1>Class Auth_OpenID_Consumer</h1>

<pre class="tree"><strong>Auth_OpenID_Consumer</strong><br /></pre>

<hr>

<p class="signature">public  class <strong>Auth_OpenID_Consumer</strong></p>

<div class="comment" id="overview_description"><p>An OpenID consumer implementation that performs discovery and does
session management.  See the Consumer.php file documentation for
more information.</p></div>

<hr>

<table id="summary_field">
<tr><th colspan="2">Field Summary</th></tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#_token_suffix">$_token_suffix</a></p><p class="description"></p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#discoverMethod">$discoverMethod</a></p><p class="description"></p></td>
</tr>
<tr>
<td class="type">private  mixed</td>
<td class="description"><p class="name"><a href="#session_key_prefix">$session_key_prefix</a></p><p class="description"></p></td>
</tr>
</table>

<table id="summary_method">
<tr><th colspan="2">Method Summary</th></tr>
<tr>
<td class="type"> void</td>
<td class="description"><p class="name"><a href="#__construct()">__construct</a>(<a href="../openid/auth_openid_openidstore.html">Auth_OpenID_OpenIDStore</a> store, mixed session, str consumer_cls)</p><p class="description">Initialize a Consumer instance.
</p></td>
</tr>
<tr>
<td class="type"> <a href="../openid/auth_openid_authrequest.html">Auth_OpenID_AuthRequest</a></td>
<td class="description"><p class="name"><a href="#begin()">begin</a>(string user_url, bool anonymous)</p><p class="description">Start the OpenID authentication process. </p></td>
</tr>
<tr>
<td class="type"> <a href="../openid/auth_openid_authrequest.html">Auth_OpenID_AuthRequest</a></td>
<td class="description"><p class="name"><a href="#beginWithoutDiscovery()">beginWithoutDiscovery</a>(<a href="../giftflow/auth_openid_serviceendpoint.html">Auth_OpenID_ServiceEndpoint</a> endpoint, bool anonymous)</p><p class="description">Start OpenID verification without doing OpenID server
discovery. </p></td>
</tr>
<tr>
<td class="type"> <a href="../openid/auth_openid_consumerresponse.html">Auth_OpenID_ConsumerResponse</a></td>
<td class="description"><p class="name"><a href="#complete()">complete</a>(string current_url, array query)</p><p class="description">Called to interpret the server's response to an OpenID
request. </p></td>
</tr>
<tr>
<td class="type">private  void</td>
<td class="description"><p class="name"><a href="#getDiscoveryObject()">getDiscoveryObject</a>(mixed session, mixed openid_url, mixed session_key_prefix)</p><p class="description">Used in testing to define the discovery mechanism.</p></td>
</tr>
</table>

<h2 id="detail_field">Field Detail</h2>
<a href="../source/libraries/auth/openid/consumer.php.html#line230" class="location">libraries/Auth/OpenID/Consumer.php at line 230</a>

<h3 id="_token_suffix">_token_suffix</h3>
<code class="signature">private  mixed <strong>$_token_suffix</strong> = &quot;last_token&quot;</code>
<div class="details">
<p></p></div>

<hr>

<a href="../source/libraries/auth/openid/consumer.php.html#line220" class="location">libraries/Auth/OpenID/Consumer.php at line 220</a>

<h3 id="discoverMethod">discoverMethod</h3>
<code class="signature">private  mixed <strong>$discoverMethod</strong> = 'Auth_OpenID_discover'</code>
<div class="details">
<p></p></div>

<hr>

<a href="../source/libraries/auth/openid/consumer.php.html#line225" class="location">libraries/Auth/OpenID/Consumer.php at line 225</a>

<h3 id="session_key_prefix">session_key_prefix</h3>
<code class="signature">private  mixed <strong>$session_key_prefix</strong> = &quot;_openid_consumer_&quot;</code>
<div class="details">
<p></p></div>

<hr>

<h2 id="detail_method">Method Detail</h2><div class="method_detail">
<div class='method'><a href="../source/libraries/auth/openid/consumer.php.html#line261" class="location">libraries/Auth/OpenID/Consumer.php at line 261</a>

<h3 id="__construct()">__construct</h3>
<code class="signature">public  void <strong>__construct</strong>(<a href="../openid/auth_openid_openidstore.html">Auth_OpenID_OpenIDStore</a> store, mixed session, str consumer_cls)</code>
<div class="details">
<p>Initialize a Consumer instance.</p><p>You should create a new instance of the Consumer object with
every HTTP request that handles OpenID transactions.</p><dl>
<dt>Parameters:</dt>
<dd>store - This must be an object that implements the interface in {@link Auth_OpenID_OpenIDStore}. Several concrete implementations are provided, to cover most common use cases. For stores backed by MySQL, PostgreSQL, or SQLite, see the {@link Auth_OpenID_SQLStore} class and its sublcasses. For a filesystem-backed store, see the {@link Auth_OpenID_FileStore} module. As a last resort, if it isn't possible for the server to store state at all, an instance of {@link Auth_OpenID_DumbStore} can be used.</dd>
<dd>session - An object which implements the interface of the {@link Auth_Yadis_PHPSession} class. Particularly, this object is expected to have these methods: get($key), set($key), $value), and del($key). This defaults to a session object which wraps PHP's native session machinery. You should only need to pass something here if you have your own sessioning implementation.</dd>
<dd>consumer_cls - The name of the class to instantiate when creating the internal consumer object. This is used for testing.</dd>
</dl>
</div></div>



<div class='method'><a href="../source/libraries/auth/openid/consumer.php.html#line311" class="location">libraries/Auth/OpenID/Consumer.php at line 311</a>

<h3 id="begin()">begin</h3>
<code class="signature">public  <a href="../openid/auth_openid_authrequest.html">Auth_OpenID_AuthRequest</a> <strong>begin</strong>(string user_url, bool anonymous)</code>
<div class="details">
<p>Start the OpenID authentication process. See steps 1-2 in the
overview at the top of this file.</p><dl>
<dt>Parameters:</dt>
<dd>user_url - Identity URL given by the user. This method performs a textual transformation of the URL to try and make sure it is normalized. For example, a user_url of example.com will be normalized to http://example.com/ normalizing and resolving any redirects the server might issue.</dd>
<dd>anonymous - True if the OpenID request is to be sent to the server without any identifier information. Use this when you want to transport data but don't want to do OpenID authentication with identifiers.</dd>
<dt>Returns:</dt>
<dd>$auth_request An object containing the discovered information will be returned, with a method for building a redirect URL to the server, as described in step 3 of the overview. This object may also be used to add extension arguments to the request, using its 'addExtensionArg' method.</dd>
</dl>
</div></div>



<div class='method'><a href="../source/libraries/auth/openid/consumer.php.html#line371" class="location">libraries/Auth/OpenID/Consumer.php at line 371</a>

<h3 id="beginWithoutDiscovery()">beginWithoutDiscovery</h3>
<code class="signature">public  <a href="../openid/auth_openid_authrequest.html">Auth_OpenID_AuthRequest</a> <strong>beginWithoutDiscovery</strong>(<a href="../giftflow/auth_openid_serviceendpoint.html">Auth_OpenID_ServiceEndpoint</a> endpoint, bool anonymous)</code>
<div class="details">
<p>Start OpenID verification without doing OpenID server
discovery. This method is used internally by Consumer.begin
after discovery is performed, and exists to provide an
interface for library users needing to perform their own
discovery.</p><dl>
<dt>Parameters:</dt>
<dd>endpoint - an OpenID service endpoint descriptor.</dd>
<dd>anonymous - Set to true if you want to perform OpenID without identifiers.</dd>
<dt>Returns:</dt>
<dd>$auth_request An OpenID authentication request object.</dd>
</dl>
</div></div>



<div class='method'><a href="../source/libraries/auth/openid/consumer.php.html#line408" class="location">libraries/Auth/OpenID/Consumer.php at line 408</a>

<h3 id="complete()">complete</h3>
<code class="signature">public  <a href="../openid/auth_openid_consumerresponse.html">Auth_OpenID_ConsumerResponse</a> <strong>complete</strong>(string current_url, array query)</code>
<div class="details">
<p>Called to interpret the server's response to an OpenID
request. It is called in step 4 of the flow described in the
consumer overview.</p><dl>
<dt>Parameters:</dt>
<dd>current_url - The URL used to invoke the application. Extract the URL from your application's web request framework and specify it here to have it checked against the openid.current_url value in the response. If the current_url URL check fails, the status of the completion will be FAILURE.</dd>
<dd>query - An array of the query parameters (key => value pairs) for this HTTP request. Defaults to null. If null, the GET or POST data are automatically gotten from the PHP environment. It is only useful to override $query for testing.</dd>
<dt>Returns:</dt>
<dd>$response A instance of an Auth_OpenID_ConsumerResponse subclass. The type of response is indicated by the status attribute, which will be one of SUCCESS, CANCEL, FAILURE, or SETUP_NEEDED.</dd>
</dl>
</div></div>



<div class='method'><a href="../source/libraries/auth/openid/consumer.php.html#line283" class="location">libraries/Auth/OpenID/Consumer.php at line 283</a>

<h3 id="getDiscoveryObject()">getDiscoveryObject</h3>
<code class="signature">private  void <strong>getDiscoveryObject</strong>(mixed session, mixed openid_url, mixed session_key_prefix)</code>
<div class="details">
<p>Used in testing to define the discovery mechanism.</p></div></div>



</div><div class="header">
<h1>GiftFlow API</h1>
<ul>
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="../openid/package-summary.html">Package</a></li>
<li class="active">Class</li>
<li><a href="../openid/package-tree.html">Tree</a></li>
<li><a href="../overview-files.html">Files</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
</ul>
</div>

<div class="small_links">
<a href="../index.html" target="_top">Frames</a>
<a href="../openid/auth_openid_consumer.html" target="_top">No frames</a>
</div>
<div class="small_links">
Summary: <a href="#summary_field">Field</a> | <a href="#summary_method">Method</a> | <a href="#summary_constr">Constr</a>
Detail: <a href="#detail_field">Field</a> | <a href="#detail_method">Method</a> | <a href="#summary_constr">Constr</a>
</div>
<hr>

<p id="footer">This document was generated by <a href="http://peej.github.com/phpdoctor/">PHPDoctor: The PHP Documentation Creator</a></p>

</body>

</html>